FROM node:20-alpine

WORKDIR /app

COPY . /app/

RUN npm install pnpm -g

COPY package.json pnpm-lock.yaml* ./

RUN pnpm install

COPY prisma ./prisma/
RUN pnpm prisma generate

COPY . .

EXPOSE 3000